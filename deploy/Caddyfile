# Caddyfile — reverse proxy for Paper App backend
# Works on plain HTTP immediately, auto-HTTPS once api.dapapers.com DNS is pointed.

# Plain HTTP on port 80 — works with any hostname/IP
:80 {
    reverse_proxy backend:8080

    header {
        X-Content-Type-Options "nosniff"
        X-Frame-Options "DENY"
        -Server
    }

    encode gzip

    log {
        output stdout
        format console
    }
}

# HTTPS for the domain — uncomment once api.dapapers.com points to this server
# {$API_DOMAIN:api.dapapers.com} {
#     reverse_proxy backend:8080
#     header {
#         X-Content-Type-Options "nosniff"
#         X-Frame-Options "DENY"
#         -Server
#     }
#     encode gzip
#     log {
#         output stdout
#         format console
#     }
# }
